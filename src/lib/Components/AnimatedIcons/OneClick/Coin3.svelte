<script>
	import { gsap } from 'gsap'
	import { onMount } from 'svelte'

	export let x
	export let y
	export let rotation = 0
	export let animationDuration = 2

	let pathRefs = []

	const pathData = [
		{
			from: 'M65.6049 46.1563C72.9795 42.337 79.266 32.5135 79.6477 24.213C79.8352 20.0562 78.5068 17.0702 76.2074 15.6104L73.7971 14.0823L74.0665 14.7481C72.0617 14.3268 69.6289 14.7312 66.9767 16.1047C59.6021 19.924 53.3155 29.7475 52.9338 38.048C52.8012 40.9015 53.3868 43.1985 54.5094 44.8315L53.8967 45.0901L56.344 46.641C56.344 46.641 56.3675 46.654 56.3709 46.6606L56.4718 46.7258C58.7602 48.1158 61.9706 48.0468 65.6017 46.1663L65.6049 46.1563Z',
			to: 'M50.821 50.4195C59.0628 49.3982 68.3687 42.3684 71.6085 34.7169C73.2274 30.8838 73.0184 27.6224 71.3689 25.4551L69.6391 23.1852L69.6605 23.9031C67.9267 22.812 65.5049 22.3466 62.5408 22.7139C54.2991 23.7352 44.9931 30.765 41.7534 38.4165C40.6383 41.0464 40.39 43.4038 40.8757 45.325L40.2115 45.3548L41.968 47.6589C41.968 47.6589 41.9855 47.6792 41.9865 47.6866L42.0584 47.7828C43.7219 49.8807 46.7565 50.9307 50.8146 50.4278L50.821 50.4195Z'
		},
		{
			from: 'M63.1619 44.617C55.7874 48.4362 50.1158 44.8057 50.4909 36.5087C50.8726 28.2083 57.1591 18.3847 64.5337 14.5655C71.9083 10.7462 77.5799 14.3767 77.2048 22.6737C76.8231 30.9742 70.5365 40.7977 63.1619 44.617Z',
			to: 'M49.0656 48.1304C40.8239 49.1517 36.7656 43.778 39.998 36.1274C43.2377 28.4759 52.5437 21.4461 60.7854 20.4248C69.0272 19.4035 73.0855 24.7772 69.8531 32.4278C66.6134 40.0793 57.3074 47.1091 49.0656 48.1304Z'
		}
	]

	onMount(() => {
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				path.setAttribute('d', pathData[index].from)
			}
		})

		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				gsap.to(path, {
					duration: animationDuration,
					yoyo: true,
					repeat: -1,
					ease: 'linear',
					attr: { d: pathData[index].to }
				})
			}
		})
	})
</script>

<svg
	{x}
	{y}
	width="93"
	height="81"
	viewBox="0 0 93 81"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	style="transform: rotate({rotation}deg); transform-origin: center;"
>
	<path
		d="M65.6049 46.1563C72.9795 42.337 79.266 32.5135 79.6477 24.213C79.8352 20.0562 78.5068 17.0702 76.2074 15.6104L73.7971 14.0823L74.0665 14.7481C72.0617 14.3268 69.6289 14.7312 66.9767 16.1047C59.6021 19.924 53.3155 29.7475 52.9338 38.048C52.8012 40.9015 53.3868 43.1985 54.5094 44.8315L53.8967 45.0901L56.344 46.641C56.344 46.641 56.3675 46.654 56.3709 46.6606L56.4718 46.7258C58.7602 48.1158 61.9706 48.0468 65.6017 46.1663L65.6049 46.1563Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[0]}
	/>
	<path
		d="M63.1619 44.617C55.7874 48.4362 50.1158 44.8057 50.4909 36.5087C50.8726 28.2083 57.1591 18.3847 64.5337 14.5655C71.9083 10.7462 77.5799 14.3767 77.2048 22.6737C76.8231 30.9742 70.5365 40.7977 63.1619 44.617Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[1]}
	/>
</svg>
