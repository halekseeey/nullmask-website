<script>
	import { gsap } from 'gsap'
	import { onMount } from 'svelte'

	export let x
	export let y

	export let animationDuration = 2 // animation duration in seconds

	let pathRefs = []

	// Define path data for animation from Coin.svelte to coin-second.svelte
	const pathData = [
		{
			from: 'M47.0491 29.3326C47.0491 19.4086 40.0799 7.33946 31.482 2.37297C27.1742 -0.110273 23.2758 -0.341687 20.4632 1.29601L17.5171 3.01381L18.3716 3.09391C16.8229 4.98972 15.915 7.79339 15.915 11.3625C15.915 21.2866 22.8841 33.3557 31.482 38.3222C34.437 40.0311 37.1962 40.6719 39.5459 40.3782L39.4836 41.1703L42.4742 39.4258C42.4742 39.4258 42.5009 39.408 42.5098 39.408L42.6344 39.3368C45.3669 37.6724 47.058 34.2279 47.058 29.3415L47.0491 29.3326Z',
			to: 'M43.4514 47.1144C46.897 37.8076 44.5518 24.0697 38.2131 16.427C35.0354 12.6025 31.4598 11.032 28.2536 11.5913L24.8944 12.1794L25.6679 12.5512C23.5573 13.7913 21.7325 16.1054 20.4933 19.4525C17.0477 28.7592 19.393 42.4972 25.7317 50.1399C27.9095 52.7684 30.2745 54.3273 32.58 54.8677L32.2466 55.589L35.6568 54.9913C35.6568 54.9913 35.688 54.9839 35.6964 54.987L35.838 54.9634C38.9783 54.3513 41.7601 51.7082 43.4567 47.1258L43.4514 47.1144Z'
		},
		{
			from: 'M44.0764 31.0782C44.0764 41.0022 37.1073 45.0253 28.5094 40.0677C19.9115 35.1012 12.9424 23.0321 12.9424 13.108C12.9424 3.18394 19.9115 -0.839091 28.5094 4.1185C37.1073 9.08499 44.0764 21.1541 44.0764 31.0782Z',
			to: 'M40.0571 47.7193C36.6115 57.026 28.6791 58.3791 22.3373 50.7448C15.9986 43.1021 13.6534 29.3641 17.099 20.0574C20.5446 10.7507 28.477 9.39756 34.8188 17.0319C41.1575 24.6746 43.5027 38.4126 40.0571 47.7193Z'
		}
	]

	onMount(() => {
		// Set initial path data
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				path.setAttribute('d', pathData[index].from)
			}
		})

		// Start infinite animation
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				gsap.to(path, {
					duration: animationDuration,
					yoyo: true,
					repeat: -1,
					ease: 'linear',
					attr: { d: pathData[index].to }
				})
			}
		})
	})
</script>

<svg {x} {y} width="60" height="94" viewBox="0 0 60 94" fill="none">
	<path
		d="M47.0491 29.3326C47.0491 19.4086 40.0799 7.33946 31.482 2.37297C27.1742 -0.110273 23.2758 -0.341687 20.4632 1.29601L17.5171 3.01381L18.3716 3.09391C16.8229 4.98972 15.915 7.79339 15.915 11.3625C15.915 21.2866 22.8841 33.3557 31.482 38.3222C34.437 40.0311 37.1962 40.6719 39.5459 40.3782L39.4836 41.1703L42.4742 39.4258C42.4742 39.4258 42.5009 39.408 42.5098 39.408L42.6344 39.3368C45.3669 37.6724 47.058 34.2279 47.058 29.3415L47.0491 29.3326Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.5"
		stroke-miterlimit="10"
		bind:this={pathRefs[0]}
	/>
	<path
		d="M44.0764 31.0782C44.0764 41.0022 37.1073 45.0253 28.5094 40.0677C19.9115 35.1012 12.9424 23.0321 12.9424 13.108C12.9424 3.18394 19.9115 -0.839091 28.5094 4.1185C37.1073 9.08499 44.0764 21.1541 44.0764 31.0782Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.5"
		stroke-miterlimit="10"
		bind:this={pathRefs[1]}
	/>
</svg>
