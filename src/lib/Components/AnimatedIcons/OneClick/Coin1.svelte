<script>
	import { gsap } from 'gsap'
	import { onMount } from 'svelte'

	export let x
	export let y
	export let rotation = 0
	export let animationDuration = 2

	let pathRefs = []

	// Animate from Coin1 (current SVG) to Coin1After
	const pathData = [
		{
			from: 'M56.5327 37.3076C59.6416 29.6066 58.0144 18.0578 52.8983 11.5104C50.3333 8.23387 47.3806 6.83305 44.6851 7.22282L41.8608 7.63292L42.4987 7.96275C40.7031 8.94874 39.1203 10.84 38.0022 13.6096C34.8933 21.3107 36.5205 32.8594 41.6366 39.4069C43.3943 41.6586 45.3347 43.0203 47.2501 43.5285L46.9536 44.1236L49.8207 43.7068C49.8207 43.7068 49.847 43.7013 49.8539 43.7041L49.9729 43.6879C52.6147 43.2523 55.0061 41.1091 56.5368 37.3173L56.5327 37.3076Z',
			to: 'M48.0927 50.1699C53.6815 44.027 56.1645 32.6317 53.6394 24.7155C52.3714 20.7524 50.0886 18.4138 47.4254 17.8436L44.6344 17.2478L45.1182 17.7785C43.092 18.0799 40.9511 19.304 38.9412 21.5133C33.3524 27.6561 30.8694 39.0515 33.3945 46.9676C34.2612 49.6895 35.6082 51.64 37.228 52.7815L36.7434 53.2367L39.5769 53.8411C39.5769 53.8411 39.6035 53.8451 39.609 53.8501L39.7262 53.8762C42.3549 54.3847 45.3414 53.205 48.0932 50.1804L48.0927 50.1699Z'
		},
		{
			from: 'M53.6793 37.731C50.5705 45.4321 43.9022 46.3707 38.7833 39.8302C33.6672 33.2828 32.04 21.734 35.1489 14.033C38.2577 6.33192 44.926 5.39325 50.0449 11.9338C55.1611 18.4812 56.7882 30.03 53.6793 37.731Z',
			to: 'M45.2688 49.5758C39.68 55.7186 33.1007 54.2842 30.5706 46.3735C28.0455 38.4574 30.5285 27.062 36.1173 20.9192C41.7061 14.7763 48.2854 16.2108 50.8155 24.1214C53.3406 32.0376 50.8576 43.4329 45.2688 49.5758Z'
		}
	]

	onMount(() => {
		// Initialize with from paths
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				path.setAttribute('d', pathData[index].from)
			}
		})

		// Animate to target and yoyo forever
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				gsap.to(path, {
					duration: animationDuration,
					yoyo: true,
					repeat: -1,
					ease: 'linear',
					attr: { d: pathData[index].to }
				})
			}
		})
	})
</script>

<svg
	{x}
	{y}
	width="76"
	height="91"
	viewBox="0 0 76 91"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	style="transform: rotate({rotation}deg); transform-origin: center;"
>
	<path
		d="M56.5327 37.3076C59.6416 29.6066 58.0144 18.0578 52.8983 11.5104C50.3333 8.23387 47.3806 6.83305 44.6851 7.22282L41.8608 7.63292L42.4987 7.96275C40.7031 8.94874 39.1203 10.84 38.0022 13.6096C34.8933 21.3107 36.5205 32.8594 41.6366 39.4069C43.3943 41.6586 45.3347 43.0203 47.2501 43.5285L46.9536 44.1236L49.8207 43.7068C49.8207 43.7068 49.847 43.7013 49.8539 43.7041L49.9729 43.6879C52.6147 43.2523 55.0061 41.1091 56.5368 37.3173L56.5327 37.3076Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[0]}
	/>
	<path
		d="M53.6793 37.731C50.5705 45.4321 43.9022 46.3707 38.7833 39.8302C33.6672 33.2828 32.04 21.734 35.1489 14.033C38.2577 6.33192 44.926 5.39325 50.0449 11.9338C55.1611 18.4812 56.7882 30.03 53.6793 37.731Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[1]}
	/>
</svg>
