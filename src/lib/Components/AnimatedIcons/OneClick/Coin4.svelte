<script>
	import { gsap } from 'gsap'
	import { onMount } from 'svelte'

	export let x
	export let y
	export let rotation = 0
	export let animationDuration = 2

	let pathRefs = []

	const pathData = [
		{
			from: 'M54.5035 46.8415C62.7173 48.0682 73.5679 43.792 78.7413 37.2898C81.3291 34.0313 82.0026 30.8333 80.9948 28.303L79.9372 25.6523L79.7652 26.3496C78.3876 24.8335 76.1793 23.7355 73.2253 23.2943C65.0115 22.0676 54.1609 26.3438 48.9875 32.846C47.2078 35.0805 46.3363 37.2849 46.289 39.266L45.6411 39.1166L46.7152 41.8074C46.7152 41.8074 46.7267 41.8317 46.7256 41.8391L46.7691 41.951C47.8089 44.4183 50.4507 46.2437 54.495 46.8478L54.5035 46.8415Z',
			to: 'M40.0234 41.6344C47.3005 45.636 58.9607 45.3923 66.0694 41.0902C69.6273 38.9326 71.3689 36.1673 71.3021 33.4446L71.2304 30.5916L70.8272 31.1859C70.0615 29.2858 68.3717 27.4896 65.7545 26.0504C58.4774 22.0488 46.8172 22.2926 39.7085 26.5946C37.2639 28.0724 35.6814 29.8372 34.9493 31.6787L34.3936 31.3136L34.4669 34.2099C34.4669 34.2099 34.4692 34.2367 34.4656 34.2432L34.4676 34.3633C34.5863 37.0381 36.4302 39.667 40.0133 41.6374L40.0234 41.6344Z'
		},
		{
			from: 'M53.4278 44.1658C45.214 42.939 42.7457 36.6737 47.9118 30.1703C53.0852 23.6681 63.9358 19.3919 72.1496 20.6186C80.3634 21.8454 82.8317 28.1107 77.6656 34.6141C72.4922 41.1163 61.6416 45.3925 53.4278 44.1658Z',
			to: 'M39.9437 38.7479C32.6666 34.7463 32.5267 28.0138 39.6288 23.7082C46.7376 19.4061 58.3977 19.1623 65.6748 23.1639C72.952 27.1656 73.0919 33.8981 65.9897 38.2037C58.881 42.5058 47.2208 42.7496 39.9437 38.7479Z'
		}
	]

	onMount(() => {
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				path.setAttribute('d', pathData[index].from)
			}
		})

		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				gsap.to(path, {
					duration: animationDuration,
					yoyo: true,
					repeat: -1,
					ease: 'linear',
					attr: { d: pathData[index].to }
				})
			}
		})
	})
</script>

<svg
	{x}
	{y}
	width="85"
	height="62"
	viewBox="0 0 85 62"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	style="transform: rotate({rotation}deg); transform-origin: center;"
>
	<path
		d="M54.5035 46.8415C62.7173 48.0682 73.5679 43.792 78.7413 37.2898C81.3291 34.0313 82.0026 30.8333 80.9948 28.303L79.9372 25.6523L79.7652 26.3496C78.3876 24.8335 76.1793 23.7355 73.2253 23.2943C65.0115 22.0676 54.1609 26.3438 48.9875 32.846C47.2078 35.0805 46.3363 37.2849 46.289 39.266L45.6411 39.1166L46.7152 41.8074C46.7152 41.8074 46.7267 41.8317 46.7256 41.8391L46.7691 41.951C47.8089 44.4183 50.4507 46.2437 54.495 46.8478L54.5035 46.8415Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[0]}
	/>
	<path
		d="M53.4278 44.1658C45.214 42.939 42.7457 36.6737 47.9118 30.1703C53.0852 23.6681 63.9358 19.3919 72.1496 20.6186C80.3634 21.8454 82.8317 28.1107 77.6656 34.6141C72.4922 41.1163 61.6416 45.3925 53.4278 44.1658Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[1]}
	/>
</svg>
