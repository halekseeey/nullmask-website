<script>
	import { gsap } from 'gsap'
	import { onMount } from 'svelte'

	export let x
	export let y
	export let rotation = 0
	export let animationDuration = 2

	let pathRefs = []

	// Animate from Coin2 to Coin2After
	const pathData = [
		{
			from: 'M10.8383 24.5466C10.8383 16.2417 16.6703 6.14176 23.8654 1.98558C27.4704 -0.0925081 30.7328 -0.286165 33.0865 1.08433L35.5519 2.52186L34.8368 2.5889C36.1328 4.17539 36.8926 6.52162 36.8926 9.50841C36.8926 17.8133 31.0605 27.9133 23.8654 32.0694C21.3926 33.4995 19.0836 34.0358 17.1172 33.79L17.1694 34.4529L14.6667 32.993C14.6667 32.993 14.6444 32.9781 14.6369 32.9781L14.5326 32.9186C12.246 31.5257 10.8308 28.6432 10.8308 24.5541L10.8383 24.5466Z',
			to: 'M13.8486 39.4259C10.9652 31.6377 12.9278 20.1413 18.2322 13.7456C20.8914 10.5452 23.8836 9.23093 26.5667 9.69897L29.3778 10.1911L28.7305 10.5022C30.4967 11.54 32.0237 13.4765 33.0607 16.2775C35.9441 24.0656 33.9816 35.562 28.6771 41.9577C26.8546 44.1573 24.8755 45.4619 22.9462 45.9141L23.2252 46.5177L20.3714 46.0175C20.3714 46.0175 20.3453 46.0113 20.3383 46.0139L20.2198 45.9942C17.5919 45.482 15.264 43.2701 13.8442 39.4354L13.8486 39.4259Z'
		},
		{
			from: 'M13.3265 26.0071C13.3265 34.312 19.1586 37.6786 26.3537 33.5299C33.5488 29.3737 39.3809 19.2738 39.3809 10.9689C39.3809 2.66397 33.5488 -0.702685 26.3537 3.44604C19.1586 7.60222 13.3265 17.7022 13.3265 26.0071Z',
			to: 'M16.6903 39.9313C19.5737 47.7194 26.2117 48.8518 31.5188 42.4631C36.8232 36.0674 38.7857 24.571 35.9024 16.7829C33.019 8.9947 26.3809 7.86236 21.0739 14.251C15.7694 20.6467 13.8069 32.1431 16.6903 39.9313Z'
		}
	]

	onMount(() => {
		// Initialize with from paths
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				path.setAttribute('d', pathData[index].from)
			}
		})

		// Animate to target and yoyo forever
		pathRefs.forEach((path, index) => {
			if (path && pathData[index]) {
				gsap.to(path, {
					duration: animationDuration,
					yoyo: true,
					repeat: -1,
					ease: 'linear',
					attr: { d: pathData[index].to }
				})
			}
		})
	})
</script>

<svg
	{x}
	{y}
	width="51"
	height="79"
	viewBox="0 0 51 79"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	style="transform: rotate({rotation}deg); transform-origin: center;"
>
	<path
		d="M10.8383 24.5466C10.8383 16.2417 16.6703 6.14176 23.8654 1.98558C27.4704 -0.0925081 30.7328 -0.286165 33.0865 1.08433L35.5519 2.52186L34.8368 2.5889C36.1328 4.17539 36.8926 6.52162 36.8926 9.50841C36.8926 17.8133 31.0605 27.9133 23.8654 32.0694C21.3926 33.4995 19.0836 34.0358 17.1172 33.79L17.1694 34.4529L14.6667 32.993C14.6667 32.993 14.6444 32.9781 14.6369 32.9781L14.5326 32.9186C12.246 31.5257 10.8308 28.6432 10.8308 24.5541L10.8383 24.5466Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[0]}
	/>
	<path
		d="M13.3265 26.0071C13.3265 34.312 19.1586 37.6786 26.3537 33.5299C33.5488 29.3737 39.3809 19.2738 39.3809 10.9689C39.3809 2.66397 33.5488 -0.702685 26.3537 3.44604C19.1586 7.60222 13.3265 17.7022 13.3265 26.0071Z"
		fill="#CDEF33"
		stroke="#202221"
		stroke-width="0.418422"
		stroke-miterlimit="10"
		bind:this={pathRefs[1]}
	/>
</svg>
