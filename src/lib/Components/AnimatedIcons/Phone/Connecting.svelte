<script>
	import { onMount } from 'svelte'
	import { gsap } from 'gsap'

	export let x
	export let y
	export let connectingScreenRef

	let circleRefs = []

	onMount(() => {
		// Start infinite animation for circles
		startCircleAnimation()
	})

	function startCircleAnimation() {
		// Define initial and target Y coordinates for each circle
		const circleAnimations = [
			{ initialY: 180.693, targetY: 179.402 }, // First circle: cy="179.402" -> cy="174.402" (shift -5)
			{ initialY: 180.693, targetY: 179.402 }, // Second circle: cy="180.693" -> cy="175.693" (shift -5)
			{ initialY: 180.693, targetY: 179.402 } // Third circle: cy="180.693" -> cy="175.693" (shift -5)
		]

		// Animate each circle with a delay
		circleRefs.forEach((circle, index) => {
			if (circle && circleAnimations[index]) {
				gsap.to(circle, {
					duration: 0.6,
					yoyo: true,
					repeat: -1,
					ease: 'power2.inOut',
					delay: index * 0.2,
					attr: {
						fill: '#CDEF33',
						cy: circleAnimations[index].targetY
					}
				})
			}
		})
	}
</script>

<svg
	{x}
	{y}
	width="201"
	height="373"
	viewBox="0 0 201 373"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	bind:this={connectingScreenRef}
>
	<path
		d="M53.7676 106.543C53.7676 105.543 53.986 104.651 54.4227 103.865C54.8594 103.069 55.4562 102.453 56.2131 102.016C56.97 101.569 57.8143 101.346 58.7459 101.346C59.8813 101.346 60.8518 101.618 61.6572 102.161C62.4724 102.695 63.0643 103.452 63.4331 104.432H62.2395C61.9483 103.743 61.502 103.205 60.9003 102.816C60.3083 102.428 59.5902 102.234 58.7459 102.234C57.9987 102.234 57.3242 102.409 56.7226 102.758C56.1306 103.108 55.6648 103.612 55.3252 104.272C54.9855 104.922 54.8157 105.679 54.8157 106.543C54.8157 107.407 54.9855 108.164 55.3252 108.814C55.6648 109.464 56.1306 109.964 56.7226 110.313C57.3242 110.662 57.9987 110.837 58.7459 110.837C59.5902 110.837 60.3083 110.648 60.9003 110.269C61.502 109.881 61.9483 109.347 62.2395 108.668H63.4331C63.0643 109.639 62.4724 110.391 61.6572 110.924C60.8421 111.458 59.8716 111.725 58.7459 111.725C57.8143 111.725 56.97 111.507 56.2131 111.07C55.4562 110.624 54.8594 110.007 54.4227 109.221C53.986 108.435 53.7676 107.542 53.7676 106.543ZM68.9425 111.754C68.1953 111.754 67.5208 111.589 66.9192 111.259C66.3272 110.92 65.8565 110.444 65.5072 109.833C65.1675 109.212 64.9977 108.489 64.9977 107.664C64.9977 106.839 65.1724 106.121 65.5217 105.509C65.8711 104.888 66.3466 104.413 66.9483 104.083C67.5499 103.743 68.2244 103.573 68.9716 103.573C69.7188 103.573 70.3933 103.743 70.995 104.083C71.6063 104.413 72.0818 104.888 72.4215 105.509C72.7708 106.121 72.9455 106.839 72.9455 107.664C72.9455 108.479 72.7708 109.197 72.4215 109.818C72.0721 110.439 71.5918 110.92 70.9804 111.259C70.369 111.589 69.6897 111.754 68.9425 111.754ZM68.9425 110.866C69.4665 110.866 69.9517 110.75 70.3981 110.517C70.8445 110.274 71.2036 109.915 71.4753 109.44C71.7567 108.954 71.8975 108.362 71.8975 107.664C71.8975 106.965 71.7616 106.378 71.4899 105.902C71.2182 105.417 70.8591 105.058 70.4127 104.825C69.9663 104.583 69.4811 104.461 68.9571 104.461C68.433 104.461 67.9478 104.583 67.5014 104.825C67.055 105.058 66.696 105.417 66.4242 105.902C66.1622 106.378 66.0312 106.965 66.0312 107.664C66.0312 108.362 66.1622 108.954 66.4242 109.44C66.696 109.915 67.0502 110.274 67.4869 110.517C67.9333 110.75 68.4185 110.866 68.9425 110.866ZM78.5294 103.544C79.4804 103.544 80.2568 103.84 80.8584 104.432C81.4601 105.015 81.7609 105.864 81.7609 106.98V111.638H80.7565V107.096C80.7565 106.232 80.5382 105.573 80.1015 105.116C79.6745 104.66 79.0874 104.432 78.3402 104.432C77.5735 104.432 76.9622 104.675 76.5061 105.16C76.05 105.645 75.8219 106.359 75.8219 107.3V111.638H74.803V103.69H75.8219V105.044C76.0742 104.558 76.4381 104.19 76.9136 103.937C77.3891 103.675 77.9277 103.544 78.5294 103.544ZM87.7409 103.544C88.6919 103.544 89.4683 103.84 90.0699 104.432C90.6716 105.015 90.9724 105.864 90.9724 106.98V111.638H89.9681V107.096C89.9681 106.232 89.7497 105.573 89.313 105.116C88.886 104.66 88.2989 104.432 87.5517 104.432C86.785 104.432 86.1737 104.675 85.7176 105.16C85.2615 105.645 85.0334 106.359 85.0334 107.3V111.638H84.0145V103.69H85.0334V105.044C85.2857 104.558 85.6496 104.19 86.1251 103.937C86.6007 103.675 87.1392 103.544 87.7409 103.544ZM100.417 107.256C100.417 107.606 100.407 107.872 100.388 108.057H93.7937C93.8228 108.658 93.9684 109.173 94.2304 109.6C94.4924 110.027 94.8369 110.352 95.2639 110.575C95.6909 110.789 96.1567 110.895 96.6613 110.895C97.3212 110.895 97.8743 110.735 98.3207 110.415C98.7768 110.095 99.0777 109.663 99.2232 109.119H100.3C100.106 109.896 99.689 110.531 99.0486 111.026C98.4178 111.512 97.622 111.754 96.6613 111.754C95.9141 111.754 95.2445 111.589 94.6525 111.259C94.0605 110.92 93.5947 110.444 93.2551 109.833C92.9251 109.212 92.7602 108.489 92.7602 107.664C92.7602 106.839 92.9251 106.116 93.2551 105.495C93.585 104.874 94.046 104.398 94.6379 104.068C95.2299 103.738 95.9044 103.573 96.6613 103.573C97.4182 103.573 98.0781 103.738 98.641 104.068C99.2135 104.398 99.6502 104.845 99.9511 105.408C100.262 105.961 100.417 106.577 100.417 107.256ZM99.3834 107.227C99.3931 106.635 99.2718 106.131 99.0194 105.713C98.7768 105.296 98.442 104.981 98.015 104.767C97.5881 104.554 97.1223 104.447 96.6176 104.447C95.8607 104.447 95.2154 104.689 94.6816 105.175C94.1479 105.66 93.8519 106.344 93.7937 107.227H99.3834ZM101.815 107.664C101.815 106.839 101.98 106.121 102.31 105.509C102.64 104.888 103.096 104.413 103.679 104.083C104.261 103.743 104.926 103.573 105.673 103.573C106.653 103.573 107.458 103.816 108.089 104.301C108.73 104.786 109.142 105.446 109.326 106.281H108.235C108.099 105.708 107.803 105.262 107.347 104.942C106.9 104.612 106.342 104.447 105.673 104.447C105.139 104.447 104.659 104.568 104.232 104.811C103.805 105.053 103.465 105.417 103.213 105.902C102.97 106.378 102.849 106.965 102.849 107.664C102.849 108.362 102.97 108.954 103.213 109.44C103.465 109.925 103.805 110.289 104.232 110.531C104.659 110.774 105.139 110.895 105.673 110.895C106.342 110.895 106.9 110.735 107.347 110.415C107.803 110.085 108.099 109.629 108.235 109.047H109.326C109.142 109.862 108.73 110.517 108.089 111.012C107.449 111.507 106.643 111.754 105.673 111.754C104.926 111.754 104.261 111.589 103.679 111.259C103.096 110.92 102.64 110.444 102.31 109.833C101.98 109.212 101.815 108.489 101.815 107.664ZM112.533 104.549V109.483C112.533 109.969 112.625 110.303 112.81 110.488C112.994 110.672 113.319 110.764 113.785 110.764H114.716V111.638H113.625C112.907 111.638 112.373 111.473 112.023 111.143C111.674 110.803 111.499 110.25 111.499 109.483V104.549H110.393V103.69H111.499V101.696H112.533V103.69H114.716V104.549H112.533ZM116.906 102.191C116.703 102.191 116.528 102.118 116.382 101.972C116.237 101.827 116.164 101.647 116.164 101.434C116.164 101.22 116.237 101.045 116.382 100.91C116.528 100.764 116.703 100.691 116.906 100.691C117.11 100.691 117.285 100.764 117.43 100.91C117.576 101.045 117.649 101.22 117.649 101.434C117.649 101.647 117.576 101.827 117.43 101.972C117.285 102.118 117.11 102.191 116.906 102.191ZM117.416 103.69V111.638H116.397V103.69H117.416ZM123.45 103.544C124.401 103.544 125.177 103.84 125.779 104.432C126.38 105.015 126.681 105.864 126.681 106.98V111.638H125.677V107.096C125.677 106.232 125.459 105.573 125.022 105.116C124.595 104.66 124.008 104.432 123.26 104.432C122.494 104.432 121.882 104.675 121.426 105.16C120.97 105.645 120.742 106.359 120.742 107.3V111.638H119.723V103.69H120.742V105.044C120.995 104.558 121.358 104.19 121.834 103.937C122.309 103.675 122.848 103.544 123.45 103.544ZM132.268 103.573C133.015 103.573 133.666 103.748 134.219 104.097C134.772 104.447 135.17 104.888 135.412 105.422V103.69H136.431V111.841C136.431 112.569 136.271 113.215 135.951 113.777C135.64 114.34 135.204 114.772 134.641 115.073C134.078 115.384 133.438 115.539 132.719 115.539C131.701 115.539 130.851 115.296 130.172 114.811C129.502 114.326 129.085 113.666 128.92 112.831H129.925C130.099 113.384 130.429 113.826 130.914 114.156C131.409 114.486 132.011 114.651 132.719 114.651C133.234 114.651 133.695 114.539 134.102 114.316C134.51 114.103 134.83 113.782 135.063 113.355C135.296 112.928 135.412 112.424 135.412 111.841V109.876C135.16 110.42 134.757 110.871 134.204 111.23C133.661 111.579 133.015 111.754 132.268 111.754C131.54 111.754 130.885 111.584 130.303 111.245C129.731 110.905 129.279 110.425 128.949 109.804C128.629 109.183 128.469 108.464 128.469 107.649C128.469 106.834 128.629 106.121 128.949 105.509C129.279 104.888 129.731 104.413 130.303 104.083C130.885 103.743 131.54 103.573 132.268 103.573ZM135.412 107.664C135.412 107.023 135.281 106.46 135.019 105.975C134.757 105.49 134.398 105.116 133.942 104.854C133.496 104.592 133.001 104.461 132.457 104.461C131.895 104.461 131.39 104.588 130.944 104.84C130.497 105.092 130.143 105.461 129.881 105.946C129.629 106.422 129.502 106.989 129.502 107.649C129.502 108.299 129.629 108.872 129.881 109.367C130.143 109.852 130.497 110.226 130.944 110.488C131.39 110.74 131.895 110.866 132.457 110.866C133.001 110.866 133.496 110.735 133.942 110.473C134.398 110.211 134.757 109.838 135.019 109.352C135.281 108.867 135.412 108.304 135.412 107.664ZM138.932 111.71C138.719 111.71 138.539 111.638 138.394 111.492C138.258 111.347 138.19 111.167 138.19 110.954C138.19 110.74 138.258 110.565 138.394 110.43C138.539 110.284 138.719 110.211 138.932 110.211C139.136 110.211 139.306 110.284 139.442 110.43C139.587 110.565 139.66 110.74 139.66 110.954C139.66 111.167 139.587 111.347 139.442 111.492C139.306 111.638 139.136 111.71 138.932 111.71ZM141.576 111.71C141.363 111.71 141.183 111.638 141.038 111.492C140.902 111.347 140.834 111.167 140.834 110.954C140.834 110.74 140.902 110.565 141.038 110.43C141.183 110.284 141.363 110.211 141.576 110.211C141.78 110.211 141.95 110.284 142.086 110.43C142.231 110.565 142.304 110.74 142.304 110.954C142.304 111.167 142.231 111.347 142.086 111.492C141.95 111.638 141.78 111.71 141.576 111.71ZM144.22 111.71C144.007 111.71 143.827 111.638 143.682 111.492C143.546 111.347 143.478 111.167 143.478 110.954C143.478 110.74 143.546 110.565 143.682 110.43C143.827 110.284 144.007 110.211 144.22 110.211C144.424 110.211 144.594 110.284 144.73 110.43C144.875 110.565 144.948 110.74 144.948 110.954C144.948 111.167 144.875 111.347 144.73 111.492C144.594 111.638 144.424 111.71 144.22 111.71Z"
		fill="#CDEF33"
	/>
	<rect x="50.9814" y="165.85" width="29.4549" height="29.4567" rx="4.75093" fill="#D9D9D9" />
	<path
		d="M61.8921 190.554H72.199C72.7657 190.554 73.2249 190.099 73.2249 189.537V188.256C73.2249 187.986 73.3335 187.726 73.5262 187.536L75.3842 185.695C75.5768 185.504 75.6854 185.245 75.6854 184.975V176.797C75.6854 176.53 75.5802 176.274 75.392 176.084L70.2671 170.904C70.0734 170.71 69.8102 170.6 69.5347 170.6H59.2188C58.6521 170.6 58.1918 171.055 58.1918 171.617V172.898C58.1918 173.168 58.0832 173.427 57.8917 173.618L56.0326 175.462C55.8411 175.654 55.7324 175.912 55.7324 176.182V184.369C55.7324 184.637 55.8388 184.894 56.0281 185.084L61.1619 190.251C61.3546 190.446 61.6178 190.554 61.8933 190.554H61.8921ZM72.5877 177.197L72.6537 177.262C72.8452 177.453 72.9528 177.711 72.9528 177.98V186.815C72.9528 187.377 72.4936 187.832 71.9269 187.832H63.1644C62.8923 187.832 62.6313 187.725 62.4387 187.534L62.2998 187.396C61.8989 186.998 61.9 186.354 62.2998 185.956L66.2028 182.082L66.2767 182.009L71.1362 177.193C71.5383 176.796 72.189 176.797 72.5888 177.196L72.5877 177.197ZM59.5022 173.458H68.3979C68.6701 173.458 68.931 173.566 69.1237 173.757C69.5246 174.155 69.5235 174.799 69.1237 175.197L60.2861 183.963C59.8852 184.361 59.2345 184.361 58.8336 183.963L58.7664 183.895C58.5737 183.704 58.4662 183.445 58.4662 183.175C58.4673 181.715 58.4729 176.832 58.4752 174.475C58.4752 173.913 58.9355 173.458 59.5011 173.458H59.5022Z"
		fill="#202221"
	/>
	<path
		d="M150.229 194.643L143.566 192.66L138.541 195.663L135.035 195.662L130.007 192.66L123.347 194.643L121.321 187.806L123.347 180.217L121.321 173.802L123.347 165.85L133.754 172.066H139.822L150.229 165.85L152.255 173.802L150.229 180.217L152.255 187.806L150.229 194.643Z"
		fill="#D9D9D9"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M123.347 165.85L133.754 172.07L133.34 176.339L123.347 165.85ZM130.007 187.809L134.586 191.296L130.007 192.66V187.809ZM134.22 182.043L133.34 176.342L127.707 180.219L127.704 180.218V180.22L127.721 184.211L130.005 182.044L134.22 182.043ZM150.227 165.85L139.82 172.07L140.232 176.339L150.227 165.85ZM143.567 187.809L138.988 191.296L143.567 192.66V187.809ZM145.869 180.22V180.217L145.867 180.219L140.234 176.342L139.354 182.043H143.567L145.853 184.211L145.869 180.22Z"
		fill="#D9D9D9"
	/>
	<path
		d="M145.869 180.22H145.87M145.869 180.22V180.217L145.867 180.219L140.234 176.342L139.354 182.043H143.567L145.853 184.211L145.869 180.22ZM123.347 165.85L133.754 172.07L133.34 176.339L123.347 165.85ZM130.007 187.809L134.586 191.296L130.007 192.66V187.809ZM134.22 182.043L133.34 176.342L127.707 180.219L127.704 180.218V180.22L127.721 184.211L130.005 182.044L134.22 182.043ZM150.227 165.85L139.82 172.07L140.232 176.339L150.227 165.85ZM143.567 187.809L138.988 191.296L143.567 192.66V187.809Z"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M130.007 192.659L123.347 194.642L121.321 187.808H130.007V192.659ZM134.22 182.041L135.492 190.283L133.729 185.7L127.72 184.21L130.006 182.041L134.22 182.041ZM143.569 192.659L150.229 194.642L152.255 187.808H143.569C143.569 187.808 143.569 192.659 143.569 192.659ZM139.356 182.041L138.084 190.283L139.847 185.7L145.856 184.21L143.569 182.041L139.356 182.041Z"
		fill="#D9D9D9"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M121.321 187.807L123.347 180.218H127.704L127.72 184.21L133.73 185.701L135.493 190.283L134.586 191.292L130.007 187.805H121.321V187.807ZM152.255 187.807L150.229 180.218H145.872L145.856 184.21L139.847 185.701L138.083 190.283L138.99 191.292L143.569 187.805H152.255V187.807ZM139.822 172.066H133.754L133.342 176.335L135.493 190.279H138.084L140.236 176.335L139.822 172.066Z"
		fill="#D9D9D9"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M123.347 165.85L121.321 173.802L123.347 180.217H127.704L133.34 176.339L123.347 165.85ZM132.961 183.697H130.988L129.913 184.75L133.731 185.697L132.961 183.696V183.697ZM150.229 165.85L152.255 173.802L150.229 180.217H145.872L140.236 176.339L150.229 165.85ZM140.618 183.697H142.594L143.669 184.752L139.846 185.7L140.618 183.696V183.697ZM138.539 192.943L138.99 191.295L138.083 190.286H135.491L134.585 191.295L135.035 192.943"
		fill="#D9D9D9"
	/>
	<path
		d="M138.539 192.943L138.99 191.295L138.083 190.286H135.491L134.585 191.295L135.035 192.943M123.347 165.85L121.321 173.802L123.347 180.217H127.704L133.34 176.339L123.347 165.85ZM132.961 183.697H130.988L129.913 184.75L133.731 185.697L132.961 183.696V183.697ZM150.229 165.85L152.255 173.802L150.229 180.217H145.872L140.236 176.339L150.229 165.85ZM140.618 183.697H142.594L143.669 184.752L139.846 185.7L140.618 183.696V183.697Z"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M138.536 192.943V195.665H135.032V192.943H138.536Z"
		fill="#D9D9D9"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<path
		d="M130.007 192.657L135.036 195.663V192.941L134.586 191.293L130.007 192.657ZM143.567 192.657L138.537 195.663V192.941L138.988 191.293L143.567 192.657Z"
		fill="#D9D9D9"
		stroke="#202221"
		stroke-width="0.424563"
	/>
	<circle cx="93.5725" cy="180.693" r="2.58131" fill="#D9D9D9" bind:this={circleRefs[0]} />
	<circle cx="100.671" cy="180.693" r="2.58131" fill="#D9D9D9" bind:this={circleRefs[1]} />
	<circle cx="107.77" cy="180.693" r="2.58131" fill="#D9D9D9" bind:this={circleRefs[2]} />
</svg>
